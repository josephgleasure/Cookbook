## ROADMAP

### Purpose
Unify recipes from wildly different websites into a single, consistent recipe format with shared features:
- **Cook Mode** (focused layout/typography)
- **Step checklists** with Prev/Next navigation
- **Inline timers** per step
- **Keep Screen Awake** (Wake Lock when available)

This roadmap keeps the site simple (pure static files), while adding a tiny local generator you can open and use without a build system.

---

### Phase 1 — Keep current site working
- Keep each recipe at `recipes/<slug>/index.html`.
- Keep `netlify.toml` as-is (publish `.`).
- Optional (later): move shared CSS/JS into `assets/recipe.css` and `assets/recipe.js` and reference them from each recipe.

---

### Phase 2 — generator.html (no build step, runs locally)
Create a single-file tool `generator.html` you can open in your browser. It should:

- Accept either:
  - A recipe URL to fetch and parse, or
  - Pasted JSON matching the schema below.
- Try to extract Schema.org `Recipe` from JSON-LD (`<script type="application/ld+json">`). If missing, fall back to:
  - Embedded microdata, or
  - A minimal DOM scrape of common selectors for ingredients and steps (best-effort).
- Normalize into a consistent internal shape.
- Render a preview matching your universal recipe UI (cook mode, timers, wake lock).
- Offer a “Download index.html” button that saves a ready-to-serve page (drop into `recipes/<slug>/index.html`).

Nice-to-haves:
- Slug generator from the recipe title.
- Fields for friendly overrides (title, yields, times).
- Step-level timer hints (`{ minutes: 25, label: "Boil" }`) to auto-wire timers.

---

### Unified Recipe Data Shape
Source formats vary; we normalize to this minimal, robust shape:

```json
{
  "title": "Ragu alla Bolognese",
  "serves": "Serves 6",
  "times": {
    "total": "2.5 to 3 hours",
    "active": "~45 minutes"
  },
  "ingredients": [
    "85 g pancetta, finely chopped",
    "15 g butter, plus extra for serving"
  ],
  "steps": [
    {
      "text": "Render pancetta gently in butter and olive oil until lightly golden.",
      "timer": { "minutes": 10, "label": "Render" }
    },
    {
      "text": "Add onion, carrot, and celery; cook until soft and sweet.",
      "timer": { "minutes": 10, "label": "Sweat" }
    }
  ],
  "notes": [
    "Tip: add a small splash of milk halfway through the simmer."
  ]
}
```

---

### Bookmarklet (quick capture from the web)
Add a bookmark that attempts to extract JSON-LD `Recipe` and copies normalized JSON to clipboard. Paste that JSON into `generator.html`.

Pseudocode:
1. Find `<script type="application/ld+json">` blocks and parse.
2. Pick `@type: "Recipe"` (or array containing it).
3. Map to the unified shape (title, yields/serves, times, ingredients, instructions).
4. `navigator.clipboard.writeText(JSON.stringify(normalized, null, 2))`.

If none found, try minimal microdata selectors or prompt the user to paste manually.

---

### Output Template (what generator.html produces)
- A single HTML file containing:
  - The standardized layout and styles
  - The standardized JS for cook mode, step navigation, timers, and wake lock
  - The recipe content injected into the correct sections
- Saved as `recipes/<slug>/index.html`

This keeps hosting dead-simple and fast (no runtime dependencies).

---

### Phase 3 — Shared Assets (optional refactor)
- Extract duplicated CSS/JS from existing recipe pages into `assets/recipe.css` and `assets/recipe.js`.
- Update pages to reference these assets. Keep inline critical CSS if desired.
- `generator.html` should then inject content into a minimal HTML scaffold that references shared assets.

---

### Phase 4 — Scale to hundreds of recipes
- Consistent slugging and folder structure: `recipes/<slug>/index.html`.
- Avoid heavy client JS; keep pages static, prebuilt.
- Add simple search/filter (client-side) on the homepage using a small `recipes.json` index generated by `generator.html` (title, tags, path).
- For edits: re-run generator on the original JSON, or open `generator.html`, load JSON, tweak, and re-export.

---

### Phase 5 — Future enhancements (optional)
- Timer persistence with `localStorage` (remember running timers after reload).
- Print styles (recipes look clean on paper).
- Accessibility pass (focus states, ARIA for step navigation).
- Import/export of normalized JSON to make migration easy later.

---

### Workflow Summary
1. Open `generator.html` locally.
2. Paste a recipe URL or normalized JSON.
3. Review/adjust fields, add any step timers.
4. Click “Download index.html” -> save to `recipes/<slug>/index.html`.
5. Commit and push; Netlify redeploys automatically.


